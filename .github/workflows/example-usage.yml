name: ç”ŸæˆGitHubç»Ÿè®¡å¡ç‰‡

on:
  schedule:
    - cron: '0 0 * * 0'  # æ¯å‘¨æ—¥è¿è¡Œ
  workflow_dispatch:     # å…è®¸æ‰‹åŠ¨è§¦å‘

permissions:
  contents: write        # éœ€è¦å†™å…¥æƒé™æ¥æ›´æ–° README

jobs:
  generate-stats:
    runs-on: ubuntu-latest
    name: ç”ŸæˆGitHubç»Ÿè®¡æ•°æ®å¡ç‰‡
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        
      - name: ç”ŸæˆGitHubç»Ÿè®¡å¡ç‰‡
        id: stats
        uses: ./
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          username: ${{ github.repository_owner }}
          scope: 'all'           # åŒ…æ‹¬ä¸ªäººå’Œç»„ç»‡ä»“åº“
          readme_path: 'README.md'
          card_title: 'GitHub ç»Ÿè®¡æ•°æ®'
      
      - name: æ˜¾ç¤ºç”Ÿæˆçš„ç»Ÿè®¡æ•°æ®
        run: |
          echo "âœ¨ ç»Ÿè®¡å®Œæˆ! ç­‰çº§: ${{ steps.stats.outputs.developer_grade }}, åˆ†æ•°: ${{ steps.stats.outputs.developer_score }}"
          echo "â­ æ˜Ÿæ ‡æ€»æ•°: ${{ steps.stats.outputs.stars_count }}"
          echo "ğŸ”„ å¤„ç†æ—¶é—´: ${{ steps.stats.outputs.execution_time }} ç§’" 